"use strict";$(window).on("beforeunload ajaxStart",function(){$("body").prepend('<div data-ajax-loader><div class="loader"></div></div>')});$(window).on("ajaxStop",function(){$("body").find("[data-ajax-loader]").remove()});var action=null;var id=null;$(document).ready(function(){$("[data-low-uploader]").each(function(){uploader($(this),"low")});$("[data-fast-uploader]").each(function(){uploader($(this),"fast",$(this).data("fast-uploader"))});$("[data-image-src]").each(function(){$(this).css("background-image",'url("'+$(this).data("image-src")+'")')})});function open_form_modal(a,b,c){if(a=="create"||a=="update"){reset_form_modal(b);if(a=="update"){$.ajax({type:"POST",data:"action="+action+"&id="+id,processData:false,cache:false,dataType:"json",success:function(d){if(d.status=="success"){c(d.data)}else{if(d.status=="error"){open_notification_modal("alert",d.message)}}}})}}else{if(a=="delete"){}}b.addClass("view")}function send_form_modal(a,c,b){if(a=="create"||a=="update"){b.preventDefault();var d=new FormData(c[0]);d.append("action",action);d.append("id",id);$.ajax({type:"POST",data:d,contentType:false,processData:false,cache:false,dataType:"json",success:function(e){check_form_errors(c,e,function(){open_notification_modal("success",e.message)})}})}else{if(a=="block"||a=="unblock"){$.ajax({type:"POST",data:"action="+action+"&id="+id,processData:false,cache:false,dataType:"json",success:function(e){if(e.status=="success"){location.reload()}else{if(e.status=="error"){open_notification_modal("alert",e.message)}}}})}else{if(a=="delete"){$.ajax({type:"POST",data:"action="+action+"&id="+id,processData:false,cache:false,dataType:"json",success:function(e){if(e.status=="success"){open_notification_modal("success",e.message)}else{if(e.status=="error"){open_notification_modal("alert",e.message)}}}})}}}}function reset_form_modal(a){a.find("form")[0].reset();a.find("form").find(".uploader").find("img").attr("src","../images/empty.png");a.find("form").find("p.error").remove();a.find("form").find(".error").removeClass("error")}function open_notification_modal(a,b,d,c){b=(b==undefined)?"":b;d=(d==undefined)?((a=="success")?"reload":false):d;c=(c==undefined)?"1000":c;if(a=="success"){$('[data-modal="success"]').addClass("view");$('[data-modal="success"]').find("main > p").html(b)}else{if(a=="alert"){$('[data-modal="alert"]').addClass("view");$('[data-modal="alert"]').find("main > p").html(b)}}if(d!=false){setTimeout(function(){if(d=="reload"){location.reload()}else{window.location.href=d}},c)}}function check_form_errors(b,a,c){b.find("[name]").parents(".error").find("p.error").remove();b.find("[name]").parents(".error").removeClass("error");if(a.status=="success"){c()}else{if(a.status=="error"){if(Array.isArray(a.errors)){$.each(a.errors,function(d,e){b.find('[name="'+e[0]+'"]').parent().addClass("error");b.find('[name="'+e[0]+'"]').parent().append('<p class="error">'+e[1]+"</p>")});b.find('input[name="'+a.errors[0][0]+'"]').focus()}else{open_notification_modal("alert",a.errors)}}}}function check_type_input(f,c,a){if(f=="letter"){var e="ABCDEFGHIJKLMNÑOPQRSTUVWXYZabcdefghijklmnñopqrstuvwxyz"}else{if(f=="uppercase"){var e="ABCDEFGHIJKLMNÑOPQRSTUVWXYZ"}else{if(f=="lowercase"){var e="abcdefghijklmnñopqrstuvwxyz"}else{if(f=="number"){var e="0123456789"}else{if(f=="decimal"){var e=".0123456789"}else{if(f=="letter_number"){var e="ABCDEFGHIJKLMNÑOPQRSTUVWXYZabcdefghijklmnñopqrstuvwxyz0123456789"}else{if(f=="uppercase_number"){var e="ABCDEFGHIJKLMNÑOPQRSTUVWXYZ0123456789"}else{if(f=="lowercase_number"){var e="abcdefghijklmnñopqrstuvwxyz0123456789"}}}}}}}}var b="";for(var d=0;d<c.length;d++){if(e.indexOf(c.charAt(d))!=-1){b+=c.charAt(d)}}a.val(b)}function generate_random_token(e,g,b){if(e=="letter"){var d="ABCDEFGHIJKLMNÑOPQRSTUVWXYZabcdefghijklmnñopqrstuvwxyz"}else{if(e=="uppercase"){var d="ABCDEFGHIJKLMNÑOPQRSTUVWXYZ"}else{if(e=="lowercase"){var d="abcdefghijklmnñopqrstuvwxyz"}else{if(e=="number"){var d="0123456789"}else{if(e=="letter_number"){var d="ABCDEFGHIJKLMNÑOPQRSTUVWXYZabcdefghijklmnñopqrstuvwxyz0123456789"}else{if(e=="uppercase_number"){var d="ABCDEFGHIJKLMNÑOPQRSTUVWXYZ0123456789"}else{if(e=="lowercase_number"){var d="abcdefghijklmnñopqrstuvwxyz0123456789"}}}}}}}var c="";for(var a=0;a<g;a++){var f=Math.floor(Math.random()*d.length);c+=d.substr(f,1)}b.val(c)}function uploader(d,b,a,c){d.find("a[data-select]").on("click",function(){d.find("input[data-select]").click()});d.find("input[data-select]").on("change",function(){if($(this)[0].files[0].type.match($(this).attr("accept"))){if(b=="low"){var e=new FileReader();e.onload=function(g){d.find("[data-preview] > img").attr("src",g.target.result)};e.readAsDataURL($(this)[0].files[0])}else{if(b=="fast"){var f=new FormData();f.append("action",c);f.append("file",$(this)[0].files[0]);$.ajax({type:"POST",data:f,contentType:false,processData:false,cache:false,dataType:"json",success:function(g){if(g.status=="success"){open_notification_modal("success",g.message,true)}else{if(g.status=="error"){open_notification_modal("alert",g.message)}}}})}}}else{open_notification_modal("alert","ERROR")}})}function nav_scroll_down(f,d,a,e,c,b){var g={initialize:function(){$(document).each(function(){g.scroller()});$(document).on("scroll",function(){g.scroller()})},scroller:function(){if($(document).scrollTop()>a){if(e||b){$(e).attr("src",b)}$(f).addClass(d)}else{if(e||c){$(e).attr("src",c)}$(f).removeClass(d)}}};g.initialize()};