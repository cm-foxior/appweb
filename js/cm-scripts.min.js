"use strict";$(window).on("beforeunload ajaxStart",function(){$("body").prepend('<div data-ajax-loader><div class="loader"></div></div>')});$(window).on("ajaxStop",function(){$("body").find("[data-ajax-loader]").remove()});$(document).ready(function(){$("[data-low-uploader]").each(function(){uploader("low",$(this))});$("[data-fast-uploader]").each(function(){uploader("fast",$(this))});$("[data-image-src]").each(function(){$(this).css("background-image",'url("'+$(this).data("image-src")+'")')})});function search_in_table(c,d,b,a){b=(b==undefined)?"tbl":b;a=(a==undefined)?"normal":"hidden";$.each(d,function(h,i){if(c.length>0){var g=c.toLowerCase();var f=i.innerHTML.toLowerCase();var e=f.indexOf(g);if(e>0){i.className=""}else{if(e<=0){i.className="hidden"}}}else{if(c.length<=0&&a=="normal"){i.className=""}else{if(c.length<=0&&a=="hidden"){i.className="hidden"}}}})}function validate_string(h,g,j){var b="";var d="ABCDEFGHIJKLMNÑOPQRSTUVWXYZ";var c="abcdefghijklmnñopqrstuvwxyz";var k="0123456789";var a=".";if(Array.isArray(h)){$.each(h,function(i,l){if(l=="uppercase"){b=b+d}else{if(l=="lowercase"){b=b+c}else{if(l=="int"){b=b+k}else{if(l=="float"){b=b+a+k}}}}})}else{if(h=="uppercase"){b=d}else{if(h=="lowercase"){b=c}else{if(h=="int"){b=k}else{if(h=="float"){b=a+k}}}}}var e="";for(var f=0;f<g.length;f++){if(b.indexOf(g.charAt(f))!=-1){e+=g.charAt(f)}}j.val(e)}function generate_string(g,c,h){var b="";var e="ABCDEFGHIJKLMNÑOPQRSTUVWXYZ";var d="abcdefghijklmnñopqrstuvwxyz";var k="0123456789";var a=".";if(Array.isArray(g)){$.each(g,function(l,m){if(m=="uppercase"){b=b+e}else{if(m=="lowercase"){b=b+d}else{if(m=="int"){b=b+k}else{if(m=="float"){b=b+a+k}}}}})}else{if(g=="uppercase"){b=e}else{if(g=="lowercase"){b=d}else{if(g=="int"){b=k}else{if(g=="float"){b=a+k}}}}}var f="";for(var j=0;j<c;j++){var i=Math.floor(Math.random()*b.length);f+=b.substr(i,1)}h.val(f)}var action=null;var id=null;function open_form_modal(a,b,c){if(a=="create"||a=="update"){reset_form(b.find("form"));if(a=="update"){$.ajax({type:"POST",data:"action="+action+"&id="+id,processData:false,cache:false,dataType:"json",success:function(d){if(d.status=="success"){c(d.data)}else{if(d.status=="error"){open_notification_modal("alert",d.message)}}}})}}b.addClass("view")}function send_form_modal(a,d,b){if(a=="create"||a=="update"){b.preventDefault();var c=new FormData(d[0]);c.append("action",action);c.append("id",id);$.ajax({type:"POST",data:c,contentType:false,processData:false,cache:false,dataType:"json",success:function(e){check_form_errors(d,e,function(){open_notification_modal("success",e.message)})}})}else{if(a=="block"||a=="unblock"){$.ajax({type:"POST",data:"action="+action+"&id="+id,processData:false,cache:false,dataType:"json",success:function(e){if(e.status=="success"){location.reload()}else{if(e.status=="error"){open_notification_modal("alert",e.message)}}}})}else{if(a=="delete"){$.ajax({type:"POST",data:"action="+action+"&id="+id,processData:false,cache:false,dataType:"json",success:function(e){if(e.status=="success"){open_notification_modal("success",e.message)}else{if(e.status=="error"){open_notification_modal("alert",e.message)}}}})}}}}function reset_form(a){a[0].reset();a.find(".uploader").find("img").attr("src","../images/empty.png");a.find("p.error").remove();a.find(".error").removeClass("error")}function open_notification_modal(a,b,d,c){b=(b==undefined)?"":b;d=(d==undefined)?((a=="success")?"reload":false):d;c=(c==undefined)?"1000":c;if(a=="success"){$('[data-modal="success"]').addClass("view");$('[data-modal="success"]').find("main > p").html(b)}else{if(a=="alert"){$('[data-modal="alert"]').addClass("view");$('[data-modal="alert"]').find("main > p").html(b)}}if(d!=false){setTimeout(function(){if(d=="reload"){location.reload()}else{window.location.href=d}},c)}}function check_form_errors(b,a,c){b.find("[name]").parents(".error").find("p.error").remove();b.find("[name]").parents(".error").removeClass("error");if(a.status=="success"){c()}else{if(a.status=="error"){if(Array.isArray(a.errors)){$.each(a.errors,function(d,e){b.find('[name="'+e[0]+'"]').parent().addClass("error");b.find('[name="'+e[0]+'"]').parent().append('<p class="error">'+e[1]+"</p>")});b.find('input[name="'+a.errors[0][0]+'"]').focus()}else{open_notification_modal("alert",a.errors)}}}}function uploader(a,b){b.find("a[data-select]").on("click",function(){b.find("input[data-select]").click()});b.find("input[data-select]").on("change",function(){if($(this)[0].files[0].type.match($(this).attr("accept"))){if(a=="low"){var c=new FileReader();c.onload=function(f){b.find("[data-preview] > img").attr("src",f.target.result)};c.readAsDataURL($(this)[0].files[0])}else{if(a=="fast"){var d=new FormData();d.append("action",action);d.append("file",$(this)[0].files[0]);$.ajax({type:"POST",data:d,contentType:false,processData:false,cache:false,dataType:"json",success:function(e){if(e.status=="success"){open_notification_modal("success",e.message,true)}else{if(e.status=="error"){open_notification_modal("alert",e.message)}}}})}}}else{open_notification_modal("alert","ERROR")}})}function nav_scroll_down(f,d,a,e,c,b){var g={initialize:function(){$(document).each(function(){g.scroller()});$(document).on("scroll",function(){g.scroller()})},scroller:function(){if($(document).scrollTop()>a){if(e||b){$(e).attr("src",b)}$(f).addClass(d)}else{if(e||c){$(e).attr("src",c)}$(f).removeClass(d)}}};g.initialize()};