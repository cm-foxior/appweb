"use strict";$(document).ready(function(){$('[data-action="switch_branch"]').on("change",function(){$.ajax({type:"POST",data:"action=switch_branch&id="+$(this).val(),processData:false,cache:false,dataType:"json",success:function(b){if(b.status=="success"){window.location.href=b.path}else{if(b.status=="error"){open_notification_modal("alert",b.message)}}}})});$('[data-search="inventories"]').on("keyup",function(){search_in_table($(this).val(),$('[data-table="inventories"]').find(" > tbody > tr"))});$('[name="saved"]').on("change",function(){if($(this).val()=="free"){$('[name="bill_token"]').parents("fieldset").addClass("hidden")}else{if($(this).val()=="bill"){$('[name="bill_token"]').parents("fieldset").removeClass("hidden")}}});$('[name="bill_token"]').on("keyup",function(){validate_string(["uppercase","lowercase","int"],$(this).val(),$(this))});$('[name="product"]').parents(".st-6").find("[data-list-value]").on("click",function(){$.ajax({type:"POST",data:"action=read_product_to_add_to_input_table&id="+$(this).data("list-value"),processData:false,cache:false,dataType:"json",success:function(b){if(b.status=="success"){$('[name="input_quantity"]').parent().find("span").html(((validate_string("empty",b.data.input_unity)==false)?b.data.input_unity:"No aplica"));$('[name="input_quantity"]').attr("disabled",((validate_string("empty",b.data.input_unity)==false)?false:true));$('[name="storage_quantity"]').parent().find("span").html(b.data.storage_unity)}else{if(b.status=="error"){open_notification_modal("alert",b.message)}}}})});$('[name="input_quantity"]').on("keyup",function(){validate_string("float",$(this).val(),$(this))});$('[name="storage_quantity"]').on("keyup",function(){validate_string("float",$(this).val(),$(this))});$('[name="price"]').on("keyup",function(){validate_string("float",$(this).val(),$(this))});$('[data-search="categories"]').on("keyup",function(){search_in_table($(this).val(),$('[data-table="categories"]').find(" > label"))});$('[data-action="add_product_to_input_table"]').on("click",function(){var b=$(this).parents("form");var c=new FormData(b[0]);c.append("action","add_product_to_input_table");$.ajax({type:"POST",data:c,contentType:false,processData:false,cache:false,dataType:"json",success:function(d){check_form_errors(b,d,function(){$('[name="product"]').parents(".st-6").find("[data-preview-value]").val("");$('[name="product"]').val("");$('[name="input_quantity"]').val("");$('[name="input_quantity"]').parent().find("span").html("No aplica");$('[name="storage_quantity"]').val("");$('[name="storage_quantity"]').parent().find("span").html("Unidad");$('[name="price"]').val("");$('[name="location"]').val("");$('[name="categories[]"]').prop("checked",false);$('[data-table="inputs"]').find(" > tbody").html(d.data.table)})}})});$('[data-action="remove_product_to_input_table"]').on("click",function(){$.ajax({type:"POST",data:"action=remove_product_to_input_table&id="+$(this).data("id"),processData:false,cache:false,dataType:"json",success:function(b){if(b.status=="success"){$('[data-table="inputs"]').find(" > tbody").html(b.data.table)}else{if(b.status=="error"){open_notification_modal("alert",b.message)}}}})});var a="create_inventory_input";$(document).on("click",'[data-action="'+a+'"]',function(){action=a;id=null;open_form_modal("create",$('[data-modal="'+a+'"]'))});$('[data-modal="'+a+'"]').find("form").on("submit",function(b){send_form_modal("create",$(this),b)})});