"use strict";$(document).ready(function(){$('[data-search="products"]').on("keyup",function(){search_in_table($(this).val(),$('[data-table="products"]').find(" > tbody > tr"))});$('[data-random="token"]').on("click",function(){generate_string(["uppercase","lowercase","int"],8,$('[name="token"]'))});$('[name="token"]').on("keyup",function(){validate_string(["uppercase","lowercase","int"],$(this).val(),$(this))});$('[name="price"]').on("keyup",function(){validate_string("float",$(this).val(),$(this))});$('[name="weight_full"]').on("keyup",function(){validate_string("float",$(this).val(),$(this))});$('[name="weight_empty"]').on("keyup",function(){validate_string("float",$(this).val(),$(this))});$('[data-search="supplies"]').on("keyup",function(){search_in_table($(this).val(),$('[data-cbx="supplies"]').find(" > label"))});$('[data-search="categories"]').on("keyup",function(){search_in_table($(this).val(),$('[data-cbx="categories"]').find(" > label"))});$('[data-search="recipes"]').on("keyup",function(){search_in_table($(this).val(),$('[data-cbx="recipes"]').find(" > label"))});var b="create_product";var e="read_product";var c="update_product";var f="block_product";var a="unblock_product";var d="delete_product";$(document).on("click",'[data-action="'+b+'"]',function(){action=b;id=null;transform_form_modal("create",$('[data-modal="'+b+'"]'));open_form_modal("create",$('[data-modal="'+b+'"]'))});$(document).on("click",'[data-action="'+c+'"]',function(){action=e;id=$(this).data("id");transform_form_modal("update",$('[data-modal="'+b+'"]'));open_form_modal("update",$('[data-modal="'+b+'"]'),function(g){action=c;if(g.type=="sale"){$('[data-modal="'+b+'"]').find("form").find('[name="avatar"]').parents(".uploader").find("img").attr("src",((g.avatar!=null)?"../uploads/"+g.avatar:"../images/empty.png"))}$('[data-modal="'+b+'"]').find("form").find('[name="name"]').val(g.name);if(g.type=="sale"||g.type=="supply"||g.type=="work_material"){$('[data-modal="'+b+'"]').find("form").find('[name="token"]').val(g.token)}if(g.type=="sale"){$('[data-modal="'+b+'"]').find("form").find('[name="price"]').val(g.price)}if(g.type=="sale"||g.type=="supply"||g.type=="work_material"){$('[data-modal="'+b+'"]').find("form").find('[name="unity"]').val(g.unity)}if(g.type=="sale"||g.type=="supply"){$('[data-modal="'+b+'"]').find("form").find('[name="weight_full"]').val(g.weight.full);$('[data-modal="'+b+'"]').find("form").find('[name="weight_empty"]').val(g.weight.empty)}$.each(g.categories,function(h,i){$('[data-modal="'+b+'"]').find('[name="categories[]"][value="'+i+'"]').prop("checked",true)});if(g.type=="sale"){$.each(g.recipes,function(h,i){$('[data-modal="'+b+'"]').find('[name="recipes[]"][value="'+i+'"]').prop("checked",true)})}if(g.type=="recipe"){$.each(g.supplies,function(h,i){$('[data-modal="'+b+'"]').find('[name="supplies[]"][value="'+i+'"]').prop("checked",true)})}})});$('[data-modal="'+b+'"]').find("form").on("submit",function(g){send_form_modal("create",$(this),g)});$(document).on("click",'[data-action="'+f+'"]',function(){action=f;id=$(this).data("id");send_form_modal("block")});$(document).on("click",'[data-action="'+a+'"]',function(){action=a;id=$(this).data("id");send_form_modal("unblock")});$(document).on("click",'[data-action="'+d+'"]',function(){action=d;id=$(this).data("id");open_form_modal("delete",$('[data-modal="'+d+'"]'))});$('[data-modal="'+d+'"]').modal().onSuccess(function(){send_form_modal("delete")})});